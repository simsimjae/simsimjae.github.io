{"componentChunkName":"component---src-components-templates-page-template-js","path":"/posts/react/1","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>위 예제는 다음 레포지토리에 저장되어있습니다.  </p>\n<ol>\n<li>git clone <a href=\"https://github.com/simsimjae/react_practice.git\">https://github.com/simsimjae/react_practice.git</a>  </li>\n<li>get reset --hard 6425494561510d85fc7fb098ba4256e1d59f2fbd  </li>\n<li>yarn start or npm run start 실행</li>\n</ol>\n</blockquote>\n<h1>서론</h1>\n<p>이전 버전에서는 리액트만으로 상태관리하기가 굉장히 힘들었다.  부모와 자식간의 상태 교환만 가능했기 때문에 프로젝트 규모가 커질 수록 상태관리가 어려워 유지보수 하기가 점점 어려워진다.</p>\n<p>이걸 극복하기 위해서 <code class=\"language-text\">Redux</code>나 <code class=\"language-text\">Mobx</code>를 사용하는데 이런 상태관리 라이브러리들의 기반이 되는 리액트의 <code class=\"language-text\">Context API</code>를 살펴보자.\n리액트 16.3 이후 버전부터 이 <code class=\"language-text\">Context API</code>가 사용하기 쉽게 개편됬다고 한다.</p>\n<p>그래서, 지금은 단순히 전역상태 관리만 필요한 프로젝트라면 리덕스를 굳이 쓰지 않아도 괜찮은것같지만, 나중에 비동기 처리를 하게 될지도 모르기 때문에 그냥 처음부터 리덕스를 쓰는게 나은것같다.(개인적인 의견)</p>\n<h1>정적 Context 사용해보기</h1>\n<h3><code class=\"language-text\">src/contexts/color.js</code></h3>\n<p>먼저 저장창고 역할을 하는 Context를 만들어보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> ColorContext <span class=\"token operator\">=</span> <span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"black\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 저장창고(Context)에 검정색 저장</span></code></pre></div>\n<h3><code class=\"language-text\">src/components/App.js</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorBox</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Provider</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>원래 색상 저장 창고에는 검정색이 들어있었다. 그런데, 판매자 <code class=\"language-text\">Provider</code>씨는 color를 red로 바꿔버렸다.\n판매자가 갑이기 때문에 색깔을 빨간색으로 바꾸면 구매자는 그 바뀐 빨간색을 살 수 밖에없다.\n여기서 소비자는 <code class=\"language-text\">ColorBox</code>이다. 판매자는 <code class=\"language-text\">ColorContext.Provider</code>이다.</p>\n<p><strong>Provider가 변경한 정보(value={}부분)는 Provider의 자식들(ColorBox)에게 모두 영향을 미친다.</strong></p>\n<h3><code class=\"language-text\">src/components/ColorBox.js</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ColorBox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> \n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> color <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> \n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">:</span> <span class=\"token string\">\"64px\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token string\">\"64px\"</span><span class=\"token punctuation\">,</span> background<span class=\"token punctuation\">:</span> color <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>저장창고에 들어있는 색상을 꺼내온다.\n<code class=\"language-text\">Consumer(소비자)</code>는 <code class=\"language-text\">Provider(판매자)</code>가 저장창고에서 꺼낸 색상을(기본은 검정색인데, 판매자가 방금 빨간색으로 바꿈) 구매해서 <code class=\"language-text\">div</code> 박스에 페인트칠을 한다.</p>\n<h1>동적 Context 사용하기</h1>\n<blockquote>\n<p>git reset --hard ffa88aa070b4fd87424e9e552b6815fdf3059612</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 286px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/541bf53afc2624c9d3573f57fdee84c2/b01c4/2020_01_21_16_24_26.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.93706293706294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIUlEQVQoz2N48PHr9dsv7zx89/Dem4c3X/z89O3F44vXb5148uTe4/fP//779/fv3z9/sCOGt7Fur9Y4vjzl8v2bW9kmV8/Zka5ez4NdbjT4zpsYuGxV4PK3d979////399//zEAwz9lhv/zGX6fZPj/n9F1PgNDNi8Dxw9hhgeOjKUJTLUVDMWPTj0Gqvv75y8WzdJszHJibPxcDGlpPt/+v3/y4dmz539fPvvz7vmnD88/f3726c+vP/9xAAYgYGZmBpIBAcEgG/7+/U80YGBlYOBgYwNqDgsLI1kz3GZ/f3+SNXsxMPgYGDi4urY0N5OsGWj3/3nzQMw/f/6TCBj+MTD8W7gQGIn/fv8mWfP/Z8/+f/sGYv77R7pmCgBFmgGI56XwtIIwKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 01 21 16 24 26\"\n        title=\"2020 01 21 16 24 26\"\n        src=\"/static/541bf53afc2624c9d3573f57fdee84c2/b01c4/2020_01_21_16_24_26.png\"\n        srcset=\"/static/541bf53afc2624c9d3573f57fdee84c2/b01c4/2020_01_21_16_24_26.png 286w\"\n        sizes=\"(max-width: 286px) 100vw, 286px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n위에 빨주노초파남보중 하나를 왼쪽 클릭하면 아래에 큰 상자의(기본 검정색) 색깔이 바뀌고 오른쪽 클릭하면 맨아래 작은 상자(기본 빨간색)의 색깔이 바뀌는 예제이다.</p>\n<p>탑다운방식으로 살펴보자.</p>\n<h3><code class=\"language-text\">src/App.js</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectColors</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorBox</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorProvider</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>컬러 판매자(<code class=\"language-text\">Color Provider</code>)는 <code class=\"language-text\">SelectColors</code>와 <code class=\"language-text\">ColorBox</code>에게 색상을 판매하려고한다.</p>\n<h3><code class=\"language-text\">src/contexts/color.js</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> ColorContext <span class=\"token operator\">=</span> <span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\tstate<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">,</span> subColor<span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\tactions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function-variable function\">setColor</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token function-variable function\">setSubColor</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 색깔 저장소에는 두가지 컬러가 들어있고, 두가지 색상을 변경시킬수 있는 함수가 들어있다.</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ColorProvider</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>color<span class=\"token punctuation\">,</span> setColor<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"black\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>subColor<span class=\"token punctuation\">,</span> setSubColor<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t\tstate<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">,</span> subColor <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\tactions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> setColor<span class=\"token punctuation\">,</span> setSubColor <span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>context<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 색깔 판매자의 상태와 창고의 상태(context)는 일치한다.</span>\n<span class=\"token comment\">// 색깔 판매자로 감싸진 자식들(children)은 판매자 Provider가 제공하는 창고정보(context)에 접근이 가능해진다.</span>\n<span class=\"token comment\">// Provider의 상태를 바꿔주면 창고의 상태도 같이 바뀐다.</span>\n\n<span class=\"token keyword\">const</span> ColorConsumer <span class=\"token operator\">=</span> ColorContext<span class=\"token punctuation\">.</span>Consumer<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> ColorProvider<span class=\"token punctuation\">,</span> ColorConsumer <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 내보내진 ColorConsumer를 사용하면 Provider가 props로 context(창고)를 내려준다.</span>\n<span class=\"token comment\">// 내보내진 ColorProvider를 사용하면 value=\"\" 부분에 객체를 넣어서 context(창고)를 수정할 수 있다.</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ColorContext<span class=\"token punctuation\">;</span></code></pre></div>\n<p>컬러 판매자 <code class=\"language-text\">Provider</code>는 창고에 두가지 색상(검정색, 빨간색)을 미리 준비해뒀다.<br>\n그리고 창고의 상태와 <code class=\"language-text\">Provider</code>의 상태를 일치시킨다. 다시말해서, <strong>Provider가 가진 색상 정보가 변경되면 창고의 색상 정보도 같이 변경되게끔 구성했다.</strong></p>\n<p><code class=\"language-text\">children</code>에는 Provider로 감싸진 소비자 두명 <code class=\"language-text\">SelectColors</code>와 <code class=\"language-text\">ColorBox</code>가 들어오게 된다.<br>\n이 두명의 소비자는 <code class=\"language-text\">Provider</code>가 제공하는 창고의 정보 <code class=\"language-text\">context</code>에 접근할 수 있으며 창고에 있는 색상을 변경시키는 <code class=\"language-text\">setColor</code>와 <code class=\"language-text\">setSubColor</code>도 사용할수있다.</p>\n<p>그리고 나서 창고파일(color.js)에서 Provider, Consumer, Context (생산자, 소비자, 창고) 3개를 내보내준다.</p>\n<h3><code class=\"language-text\">src/components/SelectColors.js</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorConsumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">context</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token punctuation\">:</span> <span class=\"token string\">\"flex\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token punctuation\">{</span>colors<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">color</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n\t\t\t\t\t<span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>color<span class=\"token punctuation\">}</span></span>\n\t\t\t\t\t<span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> background<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>color<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> <span class=\"token string\">\"24px\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token string\">\"24px\"</span><span class=\"token punctuation\">,</span> display<span class=\"token punctuation\">:</span> <span class=\"token string\">\"inline-block\"</span><span class=\"token punctuation\">,</span> cursor<span class=\"token punctuation\">:</span> <span class=\"token string\">\"pointer\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n\t\t\t\t\t<span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\tcontext<span class=\"token punctuation\">.</span>actions<span class=\"token punctuation\">.</span><span class=\"token function\">setColor</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n\t\t\t\t\t<span class=\"token attr-name\">onContextMenu</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tcontext<span class=\"token punctuation\">.</span>actions<span class=\"token punctuation\">.</span><span class=\"token function\">setSubColor</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n\t\t\t\t<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorConsumer</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>색상 구매자 <code class=\"language-text\">SelectColors</code>는 어떤색을 구매할지 결정하기 위해서 색상 판매자 <code class=\"language-text\">Provider</code>로부터 색상 창고(<code class=\"language-text\">context</code>)를 구경하기로 했다.(<strong>Consumer내부 함수에서 context를 props로 받아오는 부분</strong>)</p>\n<p><strong>마우스 왼쪽클릭시,</strong> Provider로 부터 전달받은 context에 접근해서 Provider가 갖고 있는 컬러 정보를 바꿔준다.\nProvider와 창고(context)의 상태는 일치시켜져있기 때문에 Provider의 상태를 바꾸면 Context의 상태도 같이 바뀐다.</p>\n<p><strong>마우스 우클릭시,</strong> Provider가 갖고 있는 두번째 컬러값이 변경된다.</p>\n<h1>Consumer대신 Hook, static contextType 사용하기</h1>\n<blockquote>\n<p>git reset --hard 0c86a557bdacee06203b529f018b2caa93155af1</p>\n</blockquote>\n<p>위에서 봤듯이, Consumer를 사용하게 되면 코드가 길어지고 보기 힘들어 지는 느낌이 있다.\nConsumer가 여러개 중첩되어 있을땐 더더욱 보기가 힘들어진다.</p>\n<p>그래서 리액트에서는 <code class=\"language-text\">Consumer</code>대신 리액트 훅스에서 <code class=\"language-text\">useContext Hook</code>을 제공하고, 클래스 컴포넌트에서는 <code class=\"language-text\">static contextType</code>을 제공한다.\n위에서 봤던 Consumer인 ColorBox를 다시 한번 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ColorConsumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">context</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">:</span> <span class=\"token string\">\"64px\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token string\">\"64px\"</span><span class=\"token punctuation\">,</span> background<span class=\"token punctuation\">:</span> context<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">:</span> <span class=\"token string\">\"32px\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token string\">\"32px\"</span><span class=\"token punctuation\">,</span> background<span class=\"token punctuation\">:</span> context<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>subColor <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ColorConsumer</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Consumer를 사용하면 항상 이렇게 무언가를 감싸줘야 한다. 이 감싸주는거 자체가 가독성을 떨어뜨린다.</p>\n<p>그래서 그렇게 하지말고, <code class=\"language-text\">useContext Hook</code>을 써보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ColorContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">:</span> <span class=\"token string\">\"64px\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token string\">\"64px\"</span><span class=\"token punctuation\">,</span> background<span class=\"token punctuation\">:</span> context<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">:</span> <span class=\"token string\">\"32px\"</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token string\">\"32px\"</span><span class=\"token punctuation\">,</span> background<span class=\"token punctuation\">:</span> context<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>subColor <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>훨씬 가독성이 좋아졌다.</p>\n<p>우선 <code class=\"language-text\">&lt;ColorConsumer&gt;...&lt;/ColorConsumer&gt;</code>로 자식을 감싸지 않아도 되고 안쪽 함수가 제거됬다.\n우리가 미리 만들어둔 <code class=\"language-text\">ColorContext</code>(색상 창고)에 있는걸 가져다 쓰겠다고(<code class=\"language-text\">useContext</code>)선언만 해주면 창고에 있는 두가지 색상과 색상 변경 함수들을 사용할수있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 776px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/db0e58bb6974eb513fa20035859c6c86/969f4/2020_01_22_09_01_36.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.087628865979381%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAL0lEQVQI12PQ1dGxMbc3MrbU1lDXVVfT1dPT0dbWUVdXxQFUVFR0dXWNjIy0tLQANRYJzr3ljCMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 01 22 09 01 36\"\n        title=\"2020 01 22 09 01 36\"\n        src=\"/static/db0e58bb6974eb513fa20035859c6c86/969f4/2020_01_22_09_01_36.png\"\n        srcset=\"/static/db0e58bb6974eb513fa20035859c6c86/8c2ab/2020_01_22_09_01_36.png 300w,\n/static/db0e58bb6974eb513fa20035859c6c86/3f01f/2020_01_22_09_01_36.png 600w,\n/static/db0e58bb6974eb513fa20035859c6c86/969f4/2020_01_22_09_01_36.png 776w\"\n        sizes=\"(max-width: 776px) 100vw, 776px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>실제로 useContext로 가져온 <code class=\"language-text\">context</code>를 콘솔에 찍어보면 위와 같이 창고에 저장된 정보가 보인다.</p>\n<h2>static contextType</h2>\n<p>리액트 훅스에서는 <code class=\"language-text\">useContext</code>를 사용하면 되고, 클래스형 컴포넌트에서는 <code class=\"language-text\">static contextType</code>이라는걸 쓰면 된다. 지금은 훅스가 대세이므로 예제에는 넣지 않고\n그냥 살펴만 보고 아 이런게 있구나 하고 넘어가도록 하자.</p>\n<h3><code class=\"language-text\">components/SelectColors.js</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SelectColors</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">static</span> contextType <span class=\"token operator\">=</span> ColorContext<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 컨텍스트(창고) 조회</span>\n\n\t<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token operator\">...</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>클래스형 컴포넌트에서는 위와 같이 컨텍스트를 조회하면 된다. <code class=\"language-text\">this.context</code>로 클래스의 인스턴스에서 컨텍스트에 접근이 가능하다.</p>\n<p><strong>클래스형 컴포넌트에서는 컨텍스트를 하나밖에 사용하지 못한다는 단점이 있다.</strong>\n그렇기 때문에 더더욱 훅스를 사용하길 추천한다.</p>","frontmatter":{"path":"/posts/react/1","title":"동적 Context API","date":"January 20, 2020"}}},"pageContext":{}}}