{"componentChunkName":"component---src-components-templates-page-template-js","path":"/posts/react/6","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 373px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/07a34d074293c59b1ef73a377d1c3ffc/2878e/2020_02_04_10_33_34.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 217.69436997319036%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAsCAIAAADqwg+aAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABt0lEQVRIx9VWUWuDMBD2//+cPvZl7dscbGMUCrUWoYU22jUao9GYGHeJdrWDbZrCRj/CJcR8d+eXS9TxPG+1Wq2vAHMedL7vB0EAg81mc71gvVwuwTphGE4mE6VUAzC2lnI+nz2/vD65j7OH+WLx5rouY4V5bpY1zXQ69YHMyzKKQpitL1A0TVNC85wlJGWMUZpJKS+PlcoZI4Q4slbbQ4JJDpNCSGiVEDDWS0wcMNABt99qM+mUXHgBijAVVRUihDGGRBBC4Lv5HuBXyNrpfCtVmZjGygpG16F00wk3YKXOSw+cZjDAKc3ykldFwVOaCSmdcxba/kyGZDCOs7wA5d9PmFfC6W+A+h1Np6VZrMmM5TjBKYm5kIM8GNTtO5MkPqD98YgKLodLoCOr836ORUful85w1J9bpaygyUXBirIc66KLHEUoOh77e/ZXgtnxv6o9Ch1ZmpM+VupOsN1uu0eRpWDtFWMv2K3laVNhfQFGqw0JxPiE48RGMOhKAOf3I5guEnUD9DtjfEoIGXWe22TNBUgSSumdCmZZYfD5bi/A0WlDB38BaZb9h2D2F6D156IjW+NOyR+aAiho1x61TAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 02 04 10 33 34\"\n        title=\"2020 02 04 10 33 34\"\n        src=\"/static/07a34d074293c59b1ef73a377d1c3ffc/2878e/2020_02_04_10_33_34.png\"\n        srcset=\"/static/07a34d074293c59b1ef73a377d1c3ffc/8c2ab/2020_02_04_10_33_34.png 300w,\n/static/07a34d074293c59b1ef73a377d1c3ffc/2878e/2020_02_04_10_33_34.png 373w\"\n        sizes=\"(max-width: 373px) 100vw, 373px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n간단한 CRUD 기능이 있는 투두리스트를 만들어 보았습니다.</p>\n<blockquote>\n<p>demo : <a href=\"https://simsimjae.github.io/react_todolist\">https://simsimjae.github.io/react_todolist</a></p>\n</blockquote>\n<blockquote>\n<p>위 예제는 다음 레포지토리에 저장되어있습니다.  </p>\n<ol>\n<li>git clone <a href=\"https://github.com/simsimjae/react_practice.git\">https://github.com/simsimjae/react_practice.git</a>  </li>\n<li>get reset --hard dceffe873d8584a26f521453efe8374e6587a99d  </li>\n<li>yarn start or npm run start 실행</li>\n</ol>\n</blockquote>\n<p>조회, 작성 기능은 <a href=\"https://simsimjae.github.io/posts/react/5\">1편</a>에 작성되어있습니다.</p>\n<h1>삭제 기능 구현</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 364px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/03b98bedb39765cd1fcc9eb83c6c998e/3128d/2020_02_04_12_57_46.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.197802197802197%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAX0lEQVQY05XPSwrAIAwEUO9/Ls9haUGqS20DARNTPwhdlfRBNmEGElMHEal/yGDaxBj2Ywvx5LX9MJvOOQDoZbibCxGrotyUUrz3zGzeZ2jMsLU2pdTLvGi+nbGcMxE973MnNoDd8VIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 02 04 12 57 46\"\n        title=\"2020 02 04 12 57 46\"\n        src=\"/static/03b98bedb39765cd1fcc9eb83c6c998e/3128d/2020_02_04_12_57_46.png\"\n        srcset=\"/static/03b98bedb39765cd1fcc9eb83c6c998e/8c2ab/2020_02_04_12_57_46.png 300w,\n/static/03b98bedb39765cd1fcc9eb83c6c998e/3128d/2020_02_04_12_57_46.png 364w\"\n        sizes=\"(max-width: 364px) 100vw, 364px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n투두 카드에서 삭제 아이콘을 누르면 해당 카드가 삭제되는 기능을 구현해보겠습니다.</p>\n<h2>src/components/Card</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Card</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> inputText<span class=\"token punctuation\">,</span> cardId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>clicked<span class=\"token punctuation\">,</span> setClicked<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> useAppContext <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>AppContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">setClicked</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>clicked<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleRemove</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">const</span> newList <span class=\"token operator\">=</span> useAppContext<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> cardId <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tuseAppContext<span class=\"token punctuation\">.</span><span class=\"token function\">setList</span><span class=\"token punctuation\">(</span>newList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>article</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">card </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>clicked <span class=\"token operator\">?</span> <span class=\"token string\">\"on\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card_contents<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token punctuation\">{</span>inputText<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card_buttons<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card_button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/edit/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cardId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>faPen<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>lg<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card_button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>faTrashAlt<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>lg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleRemove<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>article</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>카드 컴포넌트에서 handleRemove 부분을 집중적으로 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleRemove</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> newList <span class=\"token operator\">=</span> useAppContext<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> cardId <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tuseAppContext<span class=\"token punctuation\">.</span><span class=\"token function\">setList</span><span class=\"token punctuation\">(</span>newList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>AppContext에 들어있는 투두리스트를 순회하면서 컴포넌트로 전달해준 카드의 아이디가 일치하는 리스트를 새로 뽑아서 newList로 만들고\n그 리스트를 다시 AppContext에 넣어줬습니다. filter는 새로운 배열을 리턴하기 때문에 불변성이 유지됩니다.\n이렇게 삭제기능은 간편하게 구현이 가능합니다.</p>\n<h1>수정 기능 구현</h1>\n<p>수정 기능은 생각보다 까다롭습니다. 우선은 연필 모양 아이콘을 누르면 URL이 <code class=\"language-text\">/react_todolist/edit/[카드아이디]</code>로 변경되고 해당 URL에 해당하는 컴포넌트가 렌더링 됩니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 364px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/03b98bedb39765cd1fcc9eb83c6c998e/3128d/2020_02_04_12_57_46.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.197802197802197%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAX0lEQVQY05XPSwrAIAwEUO9/Ls9haUGqS20DARNTPwhdlfRBNmEGElMHEal/yGDaxBj2Ywvx5LX9MJvOOQDoZbibCxGrotyUUrz3zGzeZ2jMsLU2pdTLvGi+nbGcMxE973MnNoDd8VIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 02 04 12 57 46\"\n        title=\"2020 02 04 12 57 46\"\n        src=\"/static/03b98bedb39765cd1fcc9eb83c6c998e/3128d/2020_02_04_12_57_46.png\"\n        srcset=\"/static/03b98bedb39765cd1fcc9eb83c6c998e/8c2ab/2020_02_04_12_57_46.png 300w,\n/static/03b98bedb39765cd1fcc9eb83c6c998e/3128d/2020_02_04_12_57_46.png 364w\"\n        sizes=\"(max-width: 364px) 100vw, 364px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 370px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a1a80a1254d341f0d541b3091f96aff8/544a1/2020_02_04_13_08_37.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8klEQVQoz5VRu07EMBD0//9HujQgUYFOXAUFBbmG4wMinFjKy7G9dvxgkigBhHjcaD1eeXfGKy0TQgxf0TTNOI5t22qtkUgpwZ8b+r7nnCNheZ6HENKCGCP46fHh9u5QFM/XVzdFcToe71/Or3sVcM5lWQYLVpYlxHEDatYSvrXWoqyVlnIwxqzivafrOqUUQx4QIU0hTH4OP1slMJoW15nX0h7rEIyI+Buvq1KTTR+I6Vdg2GnyDEcOoyGz+P2BbfiZfQhsfYUOZt7/GLAmckppQw4HN/5i6d+AsqpqpQlLqoWA3QXiZSdp28w8+QXi73gHzctGoV4Yo/0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 02 04 13 08 37\"\n        title=\"2020 02 04 13 08 37\"\n        src=\"/static/a1a80a1254d341f0d541b3091f96aff8/544a1/2020_02_04_13_08_37.png\"\n        srcset=\"/static/a1a80a1254d341f0d541b3091f96aff8/8c2ab/2020_02_04_13_08_37.png 300w,\n/static/a1a80a1254d341f0d541b3091f96aff8/544a1/2020_02_04_13_08_37.png 370w\"\n        sizes=\"(max-width: 370px) 100vw, 370px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n이렇게 기존 인풋 컴포넌트와 비슷한 모양의 EditInput이라는 컴포넌트를 생성했습니다. 아바타 아이콘이 빠지고 작성버튼이 수정버튼으로 변경되었습니다.\n해당 카드에 들어있던 텍스트가 이 컴포넌트에 그대로 렌더링 되어야 합니다.('입니다'텍스트) 그렇게 하기 위해서는 연필 아이콘을 눌렀을때 변경된 URL에서 카드의 아이디를 뽑아내고\nAppContext의 list에서 방금 뽑아낸 카드 아이디가 일치하는 카드의 내용을 EditInput 컴포넌트로 불러와야 합니다.</p>\n<p>그래야 연필버튼이 눌렸을때 해당 카드의 텍스트가 그대로 보여지게 됩니다. 카드의 연필 아이콘 부분은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/edit/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cardId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>faPen<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>lg<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p> react-router의 Link컴포넌트로 클라이언트 라우팅 하고있습니다.</p>\n<h2>src/App.js</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BrowserRouter</span></span> <span class=\"token attr-name\">basename</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/react_todolist<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AppContextProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span>\n\t\t\t\t\t\t<span class=\"token attr-name\">exact</span>\n\t\t\t\t\t\t<span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span>\n\t\t\t\t\t\t<span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CardList</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n\t\t\t\t\t<span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/edit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Edit</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AppContextProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>App.js를 다시 살펴봅시다. 루트 컴포넌트로 BrowserRouter가 있습니다.(basename을 설정하여 기본 url이 <a href=\"https://simsimjae.github.io/react_todolist\">https://simsimjae.github.io/react_todolist</a> 와 같이 설정됩니다.)\nBrowserRouter로 감싸진 자식들은 클라이언트 라우팅이 가능해집니다.(History API 사용)</p>\n<p>만약에 기본 url인 <a href=\"https://simsimjae.github.io/react_todolist%EB%A1%9C\">https://simsimjae.github.io/react_todolist로</a> 접속하게 되면</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span>\n\t<span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CardList</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>해당 부분이 실행되어 Input 컴포넌트와 CardList 컴포넌트가 화면에 렌더링 되게 됩니다. 그럼 다음과 같이 보여지겠죠\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 366px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.39890710382514%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABI0lEQVQoz51SyW6DMBD1//9N1FPLoQn9AVCJcuqlB9aAl4DxTgcMlFRqFfo0GkY2781mRCkty3LYwFpbVVXHu6ap21vLOSeErLfOOfBpmjLGUBzHQRD4U3+hlDocns7n5Ph6PJ3ekuQ9eHk29lsafBiGURQhiLQ2q6Rb5K0dD7bBFiChtUbk1l8+Mkw7Y2wvpJCK96LjXCnQBFgwPfk7s84Yh1ouP9OGtsDrizzHGBfwyTMhxPAnQBEtnTjt9aCgqc5J+y6bXhIuwUJ288B+9DasBpBSN5iwlgshmwZDg2h4GJCKMga7g3EQQoXSaN3Quq3fMHUz+MD/PGa+1te8yOBJ2EXlEcBsRjLGdVFmmGAY1T7ytuxdmMl+OXsxl+3+BSB+Ad2qNK1qfhgkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 02 04 13 14 05\"\n        title=\"2020 02 04 13 14 05\"\n        src=\"/static/533a2a06771047903b817b024153d00e/03d1d/2020_02_04_13_14_05.png\"\n        srcset=\"/static/533a2a06771047903b817b024153d00e/8c2ab/2020_02_04_13_14_05.png 300w,\n/static/533a2a06771047903b817b024153d00e/03d1d/2020_02_04_13_14_05.png 366w\"\n        sizes=\"(max-width: 366px) 100vw, 366px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n마찬가지로 <a href=\"https://simsimjae.github.io/react_todolist/edit\">https://simsimjae.github.io/react_todolist/edit</a> 으로 접근하게 되면 Edit 컴포넌트가 렌더링 되게 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/edit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Edit</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>해당 부분에서 왜 render={} 부분을 썼는지 궁금하신 분이 계실겁니다.\nBrowserRouter아래에 보면 AppContextProvider가 존재합니다. 이 Provider로 감싸진 자식들은 context를 사용할수있다고 했었는데요 그냥 다음과 같이 하면 context가 자식 컴포넌트에 전달되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/edit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Edit</span></span><span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>왜냐면, AppContextProvider가 전달하는 context는 Route컴포넌트로 전달되지 Edit컴포넌트로 전달되지 않기 때문입니다.\nRoute컴포넌트로 감싸져있지 않았다면 바로 Edit컴포넌트에서 context를 받을수 있었을것입니다.</p>\n<p>Edit컴포넌트는 다음과 같이 생겼습니다.</p>\n<h2>src/components/Edit</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Edit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span>\n\t\t\t\t<span class=\"token attr-name\">exact</span>\n\t\t\t\t<span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n\t\t\t\t<span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> history <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"수정할 할일을 선택해주세요\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\thistory<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n\t\t\t<span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/:id</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>EditInput<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>우리가 투두를 수정하려고 할때 그 투두의 아이디가 필요합니다. 근데 그냥 <a href=\"https://simsimjae.github.io/react_todolist/edit\">https://simsimjae.github.io/react_todolist/edit</a> 이렇게 바로 접근된 경우\n잘못 접근된것으로 판단해서 수정할 할일을 선택해주세요 라는 얼럿을 띄우고 메인페이지로 이동시킵니다.\n여기서 match라는 props는 react-router가 넣어주는 props입니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/:id</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>EditInput<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">match.path</code>는 경로에 대한 패턴을 나타냅니다.(/edit/:cardId)<br>\n<code class=\"language-text\">match.url</code>은 실제 문자열로된 url을 나타냅니다.(/edit/1)</p>\n<p><code class=\"language-text\">match.path</code>는 Route컴포넌트에 사용되고 <code class=\"language-text\">match.url</code>은 Link컴포넌트에 사용됩니다.\n왜냐면 Route의 path로 전달되는값은 동적으로 여러개가 될수있지만 Link컴포넌트로 이동할때는 딱 하나의 경로로 이동해야하기 때문입니다.\n아무튼 <a href=\"https://simsimjae.github.io/react_todolist/edit/1%EC%99%80\">https://simsimjae.github.io/react_todolist/edit/1와</a> 같이 이동하면 EditInput이라는 컴포넌트가 렌더링 됩니다.</p>\n<h2>src/components/EditInput</h2>\n<p>EditInput컴포넌트는 위에서 잠깐 소개했듯이, 수정을 위한 인풋입니다. 해당 컴포넌트는 src/components/Input에 기본형 인풋과 함께 들어있습니다.\n먼저 jsx부분을 살펴보면</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>todo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>todo_form<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleEdit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>todo_area<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>todo_input<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>오늘의 할일 수정하기<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>input<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setInput</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>todo_footer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>todo_button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">수정</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>todo_button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setInput</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t삭제\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>아까전에 봤던 메인페이지에 있는 input과 거의 유사합니다. 다른점은, 작성 -> 수정 텍스트 변경과 onSubmit에서 handleEdit함수가 실행된다는 점입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\tuseAppContext<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> match<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">setInput</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>inputText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>수정페이지에서는 해당 카드에 들어있던 문자열이 기본적으로 세팅되서 보여져야 합니다.\n리액트의 useEffect 훅스를 사용해서 AppContext에 있는 투두리스트중에서 match.params.id(url <code class=\"language-text\">/edit/1</code> 중 카드아이디에 해당하는 <code class=\"language-text\">1</code> 값)와 일치하는 투두를 현재 인풋의 state로 세팅합니다.</p>\n<p>그럼 다음과 같이 EditInput 컴포넌트가 화면에 렌더링됨과 동시에 그 카드의 내용이 세팅되겠죠?\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 370px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a1a80a1254d341f0d541b3091f96aff8/544a1/2020_02_04_13_08_37.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8klEQVQoz5VRu07EMBD0//9HujQgUYFOXAUFBbmG4wMinFjKy7G9dvxgkigBhHjcaD1eeXfGKy0TQgxf0TTNOI5t22qtkUgpwZ8b+r7nnCNheZ6HENKCGCP46fHh9u5QFM/XVzdFcToe71/Or3sVcM5lWQYLVpYlxHEDatYSvrXWoqyVlnIwxqzivafrOqUUQx4QIU0hTH4OP1slMJoW15nX0h7rEIyI+Buvq1KTTR+I6Vdg2GnyDEcOoyGz+P2BbfiZfQhsfYUOZt7/GLAmckppQw4HN/5i6d+AsqpqpQlLqoWA3QXiZSdp28w8+QXi73gHzctGoV4Yo/0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 02 04 13 08 37\"\n        title=\"2020 02 04 13 08 37\"\n        src=\"/static/a1a80a1254d341f0d541b3091f96aff8/544a1/2020_02_04_13_08_37.png\"\n        srcset=\"/static/a1a80a1254d341f0d541b3091f96aff8/8c2ab/2020_02_04_13_08_37.png 300w,\n/static/a1a80a1254d341f0d541b3091f96aff8/544a1/2020_02_04_13_08_37.png 370w\"\n        sizes=\"(max-width: 370px) 100vw, 370px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>수정 버튼이 클릭되면 다음 함수가 호출됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleEdit</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\te<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> list <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> useAppContext<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> itemIdx <span class=\"token operator\">=</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> item<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> match<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> newList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> itemIdx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> inputText<span class=\"token punctuation\">:</span> input<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">:</span> <span class=\"token function\">nextId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>itemIdx <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\tuseAppContext<span class=\"token punctuation\">.</span><span class=\"token function\">setList</span><span class=\"token punctuation\">(</span>newList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\thistory<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>우선 submit 되었을때 기본적으로 페이지를 새로고침하는 기능을 제거하기 위해서 e.preventDefault()를 실행했습니다.\n그리고 나서 AppContext에서 list를 꺼내오고 list에 있는 투두리스트들중에서 현재 match.params.id(카드아이디에 해당됨)와 일치하는 카드의 인덱스를 itemIdx로 가져옵니다.\n그리고 나서 다음 부분이 매우 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> newList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> itemIdx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> inputText<span class=\"token punctuation\">:</span> input<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">:</span> <span class=\"token function\">nextId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>itemIdx <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>왜 굳이 이렇게 해줬냐면, 불변성을 유지해주기 위해서입니다. immer나 immutable라이브러리를 사용하면\n손쉽게 불변성유지하면서 상태를 변경해줄수있는데 저는 그냥 es6의 spread operators문법을 활용해서 구현했습니다.\n먼저 배열의 slice라는 메소드는 startIndex(첫번째인자)에서 개수(두번째 인자)만큼 자른 새로운 배열을 리턴해줍니다.</p>\n<p>우리는 itemIdx번째에 있는 투두를 수정할것이기 떄문에 0부터 itemIdx개 만큼 기존 배열을 잘라넣으면 itemIdx번째 투두는 빠지게 되겠죠?\n그리고나서 우리가 업데이트할 새로운 객체를 중간에 넣어줍니다.(이렇게 가운데에 넣어주지 않으면 우리가 수정한 투두의 위치가 바뀝니다.)\n그리고 우리가 업데이트할 투두 다음번째부터 끝까지를 다시 넣어줍니다.(list.slice(itemIdx + 1) 부분)\n이렇게 하면 딱 그 부분만 수정된 새로운 배열 newList를 얻을수있습니다.</p>\n<p>그리고 나서 그 newList를 AppContext의 list에 새롭게 세팅해주면 AppContext를 바라보고 있는 다른 컴포넌트들이 새롭게 렌더링 될 것 입니다.\n(카드리스트 컴포넌트, 카드 컴포넌트가 순차적으로 리렌더링 되서 우리가 수정한 값이 반영됩니다.)\n수정을 하고 나서는 메인페이지로 이동해야하기 때문에 history.push('/')를 해주었습니다.\nhistory와 match는 react-router가 컴포넌트에 넣어준값입니다.</p>\n<h1>결론</h1>\n<p>비동기 액션이 필요하지 않은 프로젝트의 경우엔 Context API만으로 리액트의 props drilling 문제를 해결할수 있습니다.\n기존에 Context API가 사용하기 불편해서 잘 안쓰였지만 버전이 업데이트 되면서 사용하기 쉬워졌고 심지어 훅스가 나온 이후로 useContext를 사용하면\n&#x3C;Context.Consumer>로 감싸주지 않아도 context를 참조할수있기 떄문에 더더욱 편해졌습니다.</p>","frontmatter":{"path":"/posts/react/6","title":"투두리스트 만들어보기 - 수정, 삭제 기능","date":"February 04, 2020"}}},"pageContext":{}}}