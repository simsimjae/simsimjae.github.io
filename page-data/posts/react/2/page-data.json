{"componentChunkName":"component---src-components-templates-page-template-js","path":"/posts/react/2","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 154px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/32258688165d42ebbf1b59b4bbffb13a/b7a03/2020_01_28_14_05_50.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.1038961038961%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABI0lEQVQoz2VRwaqCUBD1y/2Xto+QJFBSk1AiTUVcRJCEpmLgIhemlpa+Q1P28M3icu6Ze+aemWH6Vzwej+fzOeC2bYkhsuu6pmkulwvx/SeYAeFF/y+6T0RRdLvdRlmGajuOkyQJUev1WpKk1Wpl2zaRvu8LgiDLMs/zIMfin1cQxXFcXdewVxTFfD6HXtM08K7rKopCfZHNt1jXdc/zkAaeTCaqqkJQVVUYhizLlmUJ/ng8brdbgGE6b7EoitfrFZbO5/NisRhqbzab2Wy22+2AD4cDrgBpmsZx/BXjK5i83++maU6n0/1+HwQBatFrjADZ0+lEDS+XS8MwvtOmJgGyLLMsC4UhhguygCxGDUwDH/bCjBaDM89zbPUvM9oiLQ/gFxmy8f516dkHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 01 28 14 05 50\"\n        title=\"2020 01 28 14 05 50\"\n        src=\"/static/32258688165d42ebbf1b59b4bbffb13a/b7a03/2020_01_28_14_05_50.png\"\n        srcset=\"/static/32258688165d42ebbf1b59b4bbffb13a/b7a03/2020_01_28_14_05_50.png 154w\"\n        sizes=\"(max-width: 154px) 100vw, 154px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>요즘 SPA를 만들기 위한 많은 라이브러리와 프레임워크들이 있지만 대부분 러닝커브가 크다.\nSEO와 UX를 위해서 서버사이드 렌더링도 배워야 한다.</p>\n<p><strong>그래서 우리는 간단하지만 커스텀가능한 Next.js를 개발했다.</strong></p>\n<h1>next 사용 조건 및 특징</h1>\n<ol>\n<li>next를 사용하기 위해서는 <code class=\"language-text\">pages/index.js</code>와 같은 파일에서 리액트 컴포넌트를 default로 export해야한다.</li>\n<li>next는 웹팩의 HMR을 사용해서 페이지를 핫 리로딩한다.</li>\n<li>a태그를 사용해서 라우팅하면 브라우저는 서버로 요청을 보낸다.(클라이언트 사이드 라우팅 😵</li>\n<li>대신 next/link의 Link 컴포넌트를 사용하자.</li>\n<li>Link 컴포넌트는 알아서 브라우저의 History API를 처리해주기 떄문에 개발자가 히스토리 관리를 하지 않아도 되서 편리하다.</li>\n<li>Link 컴포넌트는 단순히 Wrapper 컴포넌트이기 때문에 href외의 다른 props는 먹히지 않는다. title과 같은 속성은 a태그에 직접 주어야 한다.</li>\n</ol>\n<h1>next의 pages</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 112px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39847e504cab42e05d515d0a768125c6/d22f9/2020_01_28_16_37_39.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 214.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 01 28 16 37 39\"\n        title=\"2020 01 28 16 37 39\"\n        src=\"/static/39847e504cab42e05d515d0a768125c6/d22f9/2020_01_28_16_37_39.png\"\n        srcset=\"/static/39847e504cab42e05d515d0a768125c6/d22f9/2020_01_28_16_37_39.png 112w\"\n        sizes=\"(max-width: 112px) 100vw, 112px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\npages 디렉토리의 .js나 .ts파일에서 React 컴포넌트를 내보내면 그 컴포넌트가 해당 페이지에 렌더링 된다.\n예를들어서, pages/about.js로 부터 내보내진 리액트 컴포넌트는 주소창에서 /about이 입력됬을때 보여진다.</p>\n<h1>Pre-rendering</h1>\n<p>넥스트에서 프리렌더링기능은 기본적으로 활성화 되어 있다. 프리렌더링은 다음과 같이 두 종류가 있다.</p>\n<ol>\n<li>Static Generation</li>\n<li>Server-side rendering</li>\n</ol>\n<p>각 페이지별로 빌드 타임에 정적 파일을 만들것인지(<code class=\"language-text\">Static Generation</code>), 필요할때 서버에서 정적 파일을 만들게 할지 정할수있다.(<code class=\"language-text\">On-Demand</code>)</p>\n<p>빌드타임이든 서버사이드 렌더링이든 어쩄든 html 파일이 만들어지고 나면 자바스크립트를 실행해서 현재 주소에 맞는 컴포넌트를 렌더링한다.\n컴포넌트가 렌더링 되고 나면 <code class=\"language-text\">hydration</code>과정이 일어나게 된다.</p>\n<h2>hydration이란?</h2>\n<p>브라우저가 html파일을 렌더링 하고 나면 이번에는 리액트가 컴포넌트 트리를 구성할 차례이다. 이 과정을 hydration이라고 한다.\n(동적인 어떤것을 정적인 상태로 저장한뒤(<code class=\"language-text\">html</code>), 이것을 다시 동적인 상태로(<code class=\"language-text\">리액트 컴포넌트 트리</code>) 되돌리는 행위를 hydration이라고 한다.)</p>\n<p><code class=\"language-text\">hydration</code>과정이 끝나고 나면 리액트의 이벤트 핸들러가 부착 된다.</p>\n<h1>Static Generation</h1>\n<p><code class=\"language-text\">next build</code>커맨드를 입력하면 정적인 페이지가 빌드된다.\n어떤 페이지가 데이터에 따라서 그때그떄 달라지지 않는다면 next는 페이지를 <code class=\"language-text\">pre-render</code>한다.(빌드 타임에 미리 생성해둔다.)\n이렇게 했을떄 CDN에 정적인 페이지를 올려두기만 하면 접근이 가능해지는 장점이 생긴다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">HomePage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Welcome to Next<span class=\"token punctuation\">.</span>js<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HomePage</code></pre></div>\n<p>위 리액트 컴포넌트를 포함하는 페이지는 동적인 데이터를 요구하지 않기 떄문에 next는 이 페이지를 <code class=\"language-text\">pre-render</code>한다.\n<code class=\"language-text\">pre-render</code>한다는 뜻은, 빌드타임에 미리 html 페이지를 생성해둔다는 뜻이다.</p>\n<h1>Server-Side Rendering</h1>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> fetch <span class=\"token keyword\">from</span> <span class=\"token string\">'isomorphic-unfetch'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HomePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> stars <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Next stars<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>stars<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\nHomePage<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getInitialProps</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> req <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/repos/zeit/next.js'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> stars<span class=\"token punctuation\">:</span> json<span class=\"token punctuation\">.</span>stargazers_count <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HomePage</code></pre></div>\n<p>위 코드를 보자. getInitialProps를 통해서 데이터를 가져오고 있다. 이 함수가 리턴될때까지 페이지는 렌더링 되지 않는다.\n유저가 사이트에 접속할때 데이터를 가져오기 때문에 유저는 항상 최신의 데이터를 볼 수 있다.\n이렇게 getInitialProps로 데이터를 요청하는것은 렌더링을 block한다는 뜻에서 <code class=\"language-text\">blocking data requirement</code>라고 불린다.</p>\n<p><code class=\"language-text\">pre-render</code>된 html 페이지보다 <code class=\"language-text\">SSR</code>이 항상 최신 데이터를 불러올 수 있다는 장점은 있지만 대신에, 좀 더 렌더링이 늦을수밖에 없다.</p>\n<h1>Routing</h1>\n<h2>Index routes</h2>\n<p><code class=\"language-text\">pages/index.js</code> -> <code class=\"language-text\">/</code><br>\n<code class=\"language-text\">pages/blog/index.js</code> -> <code class=\"language-text\">/blog</code></p>\n<p>이와 같이 pages 폴더 아래에 있는 파일명에 따라서 next가 자동으로 라우팅 해주기 때문에 굉장히 편리하다.</p>\n<h2>Nested Routes</h2>\n<p>폴더를 중첩해도 라우팅에 그대로 반영된다.</p>\n<p><code class=\"language-text\">pages/blog/first-post.js</code> → <code class=\"language-text\">/blog/first-post</code><br>\n<code class=\"language-text\">pages/dashboard/settings/username.js</code> → <code class=\"language-text\">/dashboard/settings/username</code>  </p>\n<h2>Dynamic route segments</h2>\n<p><code class=\"language-text\">pages/blog/1.js</code> 라는 파일이 있다고 해보자. 이 파일은 <code class=\"language-text\">/blog/:slug</code> 동적 라우팅을 통해서 :slug 변수로 파일명(1)을 가져올수있다.</p>\n<h2>두개의 페이지간 연결하기</h2>","frontmatter":{"path":"/posts/react/2","title":"[Next.js] Getting Started, Pages, Routing","date":"January 28, 2020"}}},"pageContext":{}}}