{"componentChunkName":"component---src-components-templates-page-template-js","path":"/posts/TIL/8","result":{"data":{"markdownRemark":{"html":"<p>처음 웹페이지에 접속하면 브라우저는 서버로 요청을 보내 html, css, js 등의 파일을 다운로드 받고 파싱해서 화면에 보여준다.\n이러한 브라우저 로딩과정은 <code class=\"language-text\">다운로드</code>, <code class=\"language-text\">파싱</code>, <code class=\"language-text\">스타일</code>, <code class=\"language-text\">레이아웃</code>, <code class=\"language-text\">페인트</code>, <code class=\"language-text\">합성</code> 총 6단계로 나누어진다.</p>\n<h1>다운로드</h1>\n<p>유저가 브라우저에서 www.naver.com를 입력했을때, 브라우저는 naver의 서버로 html을 요청해서 응답을 받는다.</p>\n<h1>파싱</h1>\n<p>다운받은 html을 파싱한다. 파싱을 하면서 <code class=\"language-text\">DOM Tree</code>를 만들게 되는데, 파싱 도중에 <code class=\"language-text\">link</code>태그를 만나면 서버로 CSS파일 요청을 보낸다.<br>\n다운받은 CSS를 파싱해서 <code class=\"language-text\">CSSOM Tree</code>를 만든다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c866b4e6a5b913007db62411cadf6f5/4fe46/2020_01_16_23_10_52.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.198555956678703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABAElEQVQY012Qy07DMBBF+/8fgsSWBSs2bIoQSEUsKiGaCjVpnLpJnIfzdOKDY1Ut4krXM2PN3HmsrLV4WMM0VizRwjL7Jgke+IvRzAipkFmJSt4oHEczYkyLnWqfs1qeaTJk8TsieETXGcbFqdiQi1cv3vUNZigYRvdfDJwOa9Txiey8JwyekWJL5OxsL4JDI6jkh7NHRLjhlOw57+7IVMVJzRTihTS4R1UdwY8gTmLSaO0mLTjEOeJcE4mccZpZXVe+oDcglSvcfRLGCe2AP8XQymuOTCu+dkff4D/8hIuotbPnckHjOqV5TVFWaF3TNB1t23tfa41SJbppuNXe+AuEWH7MAD8nYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 01 16 23 10 52\"\n        title=\"2020 01 16 23 10 52\"\n        src=\"/static/2c866b4e6a5b913007db62411cadf6f5/f0628/2020_01_16_23_10_52.png\"\n        srcset=\"/static/2c866b4e6a5b913007db62411cadf6f5/8c2ab/2020_01_16_23_10_52.png 300w,\n/static/2c866b4e6a5b913007db62411cadf6f5/3f01f/2020_01_16_23_10_52.png 600w,\n/static/2c866b4e6a5b913007db62411cadf6f5/f0628/2020_01_16_23_10_52.png 1200w,\n/static/2c866b4e6a5b913007db62411cadf6f5/57025/2020_01_16_23_10_52.png 1800w,\n/static/2c866b4e6a5b913007db62411cadf6f5/8252b/2020_01_16_23_10_52.png 2400w,\n/static/2c866b4e6a5b913007db62411cadf6f5/4fe46/2020_01_16_23_10_52.png 2770w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>스타일</h1>\n<p>HTML과 CSS의 파싱이 완료되면 <code class=\"language-text\">DOM Tree</code>와 <code class=\"language-text\">CSSOM Tree</code>를 합쳐서 <code class=\"language-text\">Render Tree</code>를 생성한다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/904b85197d4de3e76cb95a1a45b6fe33/b8ac6/2020_01_16_23_12_27.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.98623537508603%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXklEQVQoz22S4W+bMBDF8///O11VqZtUad8qVeu3RUuVLNAQgiEBYpvEBvPbwZSURrV0ugPb79175xmy+r4fEqHzFHlKJ5/WatLlN0Loxr1W0jpOONqO1mu800zXBWN2KbrWUUSP7Fb3NPZApV4ps1+4Fky5oDEFh6Mnzzcckp8UyTP1IaYu5nSuuoJOAE/4RmH0nk2qiN++kyR/SfcetX6UyyvibU0ULditn4jfI9bRisXyjTTLPwA/SQ4SUp5cINqkclDhvReyBucc2lhSVTJfLFF7jfMB23jZaz93OOCNWRCrqpIoxwOnc09ZN1gHWtuRcKAO/dW4a/xv6qbD0fy2pesC72rLy5858S6jiH9QHyvxVsjiOxmKlSEFuoFhMpR+OpRbYH0y1I0hE2l5odgVhnNTYrYP4mvG6/I3+fFjGJeYTX/c1u7s5PlY8eks/hmRbUbpflAhz+mrO/8A/hxqMeq/AzUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2020 01 16 23 12 27\"\n        title=\"2020 01 16 23 12 27\"\n        src=\"/static/904b85197d4de3e76cb95a1a45b6fe33/f0628/2020_01_16_23_12_27.png\"\n        srcset=\"/static/904b85197d4de3e76cb95a1a45b6fe33/8c2ab/2020_01_16_23_12_27.png 300w,\n/static/904b85197d4de3e76cb95a1a45b6fe33/3f01f/2020_01_16_23_12_27.png 600w,\n/static/904b85197d4de3e76cb95a1a45b6fe33/f0628/2020_01_16_23_12_27.png 1200w,\n/static/904b85197d4de3e76cb95a1a45b6fe33/57025/2020_01_16_23_12_27.png 1800w,\n/static/904b85197d4de3e76cb95a1a45b6fe33/8252b/2020_01_16_23_12_27.png 2400w,\n/static/904b85197d4de3e76cb95a1a45b6fe33/b8ac6/2020_01_16_23_12_27.png 2906w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>DOM Tree에는 CSS로 display:none;을 먹인 노드들까지도 모조리 들어있지만 Render Tree에서는 그런 요소들이 포함되지 않는다.<br>\n실제로 화면에 표시되는 요소들만 렌더트리에 들어있다. 렌더트리의 각 노드에는 스타일이 먹혀있다.</p>\n<h1>레이아웃</h1>\n<p>렌더트리에 있는 각 노드들의 위치를 잡아주는 과정이다. vw, vh, %등과 같은 단위들이 실제 픽셀로 변환된다.</p>\n<h1>페인트</h1>\n<p>렌더트리의 각 노드들의 화면상 위치를 잡아줬으니까 이제는 색칠을 해야 한다.</p>\n<p>위치를 건드리지 않는 css속성들이 이때 화면에 적용된다.(background, shadow, color, font-weight)\n처리해야하는 스타일이 복잡할수록 페인트 과정이 오래걸린다. background-color보다 그라데이션이나 그림자는 페인트 과정을 길게 만든다.</p>\n<p>또한 이 과정에서 노드에 색칠을 하고 나서 각 노드를 별도의 레이어로 분리 시켜버린다.(마치 포토샾의 레이어처럼)\n노드 하나를 색칠할때마다 무조건 별도로 레이어가 만들어지는게 아니고 레이어를 만들게 유도하는 css속성들이 있다.</p>\n<p>특히 <code class=\"language-text\">transform</code>속성을 사용하게 되면 별도의 레이어가 생성된다.</p>\n<h1>리플로우와 리페인트</h1>\n<h2>리플로우(레이아웃부터~)</h2>\n<p>자바스크립트로 DOM을 변경하게되면 <code class=\"language-text\">DOM Tree</code>가 다시 만들어지고 그에따라 <code class=\"language-text\">Render Tree</code>도 다시 만들어진다.\n그럼 그 이후 단계도 마찬가지로 재실행된다.(<code class=\"language-text\">레이아웃</code>-<code class=\"language-text\">페인트</code>-<code class=\"language-text\">합성</code>)</p>\n<p>또한 CSS에서 위치값에 영향을 주는 속성들을 변경하게 되면 <code class=\"language-text\">레이아웃</code>-<code class=\"language-text\">페인트</code>-<code class=\"language-text\">합성</code> 과정이 다시 반복되게 된다.<br>\n위치가 바꼈으니까 당연히 위치를 잡아주는 레이아웃 과정부터 다시 일어나야 한다.</p>\n<h2>리페인트(페인트부터~)</h2>\n<p>반대로 위치값에 영향을 주지 않는 CSS값들을 수정하게 되면 그냥 기존에 만들어둔 <code class=\"language-text\">렌더트리</code>를 재활용 할 수 있게된다.</p>\n<p>따라서, <code class=\"language-text\">페인트</code>-<code class=\"language-text\">합성</code> 단계만 재실행하면 되서 상대적으로 부하가 덜하다.</p>\n<h1>출처</h1>\n<p><a href=\"https://boxfoxs.tistory.com/408\">https://boxfoxs.tistory.com/408</a>\n<a href=\"https://ui.toast.com/fe-guide/ko_PERFORMANCE/\">https://ui.toast.com/fe-guide/ko_PERFORMANCE/</a></p>","frontmatter":{"path":"/posts/TIL/8","title":"브라우저 로딩 과정","date":"January 06, 2020"}}},"pageContext":{}}}